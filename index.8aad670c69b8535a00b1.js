!function(){"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const n=new Uint8Array(16);function o(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));const i=function(e,n,i){if(t.randomUUID&&!n&&!e)return t.randomUUID();const r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){i=i||0;for(let t=0;t<16;++t)n[i+t]=r[t];return n}return function(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}(r)};class r{listeners=[];constructor(t="history"){this.mode=t,this.previousPath=this.getPath(),this.currentPath=this.getPath(),this.init()}static isMatch=(t,e)=>t instanceof RegExp&&t.test(e)||"function"==typeof t&&t(e)||"string"==typeof t&&t===e;static getQueryParams=()=>{const t=/\?(.+)$/.exec(window.location.href);return t?t[1].split("&").reduce(((t,e)=>{const[n,o]=e.split("=");return t[n]=o,t}),{}):{}};init=()=>{"history"===this.mode?window.addEventListener("popstate",this.bindHandlePopState):"hash"===this.mode&&window.addEventListener("hashchange",this.bindHandleHashChange),document.body.addEventListener("click",this.bindHandleClick)};unsubscribeAll=()=>{"history"===this.mode?window.removeEventListener("popstate",this.bindHandlePopState):"hash"===this.mode&&window.removeEventListener("hashchange",this.bindHandleHashChange),document.body.removeEventListener("click",this.bindHandleClick)};getPath=()=>"hash"===this.mode?""===window.location.hash?"/":window.location.hash.slice(1):window.location.pathname+window.location.search;handleListener=async({match:t,hooks:e},n,o={})=>{const s={...o,...r.getQueryParams()},i={currentPath:n,previousPath:this.previousPath,state:s};r.isMatch(t,this.previousPath)&&e.onLeave?await e.onLeave(i):(r.isMatch(t,n)&&e.onBeforeEnter&&await e.onBeforeEnter(i),r.isMatch(t,n)&&e.onEnter&&await e.onEnter(i))};handleAllListeners=(t,e,n={})=>{const o=this.listeners.find((e=>r.isMatch(e.match,t)));o&&this.handleListener(o,e,n);const s=this.listeners.find((t=>r.isMatch(t.match,e)));s&&this.handleListener(s,e,n)};on=(t,e={})=>{const n=i(),o={id:n,match:t,hooks:e};return this.listeners.push(o),this.handleListener(o,this.currentPath),()=>{this.listeners=this.listeners.filter((t=>t.id!==n))}};go=(t,e={})=>{this.previousPath=this.currentPath,"hash"===this.mode?window.location.hash=t:"history"===this.mode&&window.history.pushState(e,"",t),this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,e)};handleClick=t=>{if(!t.target.matches("a"))return;t.preventDefault();const e=t.target.getAttribute("href")??"";this.go(e)};bindHandleClick=this.handleClick.bind(this);handlePopState=()=>{this.previousPath=this.currentPath,this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,{})};bindHandlePopState=this.handlePopState.bind(this);handleHashChange=()=>{this.currentPath!==this.getPath()&&(this.previousPath=this.currentPath,this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,{}))};bindHandleHashChange=this.handleHashChange.bind(this)}document.querySelectorAll("a").forEach((t=>{t.href="/otus--homework--18"+t.pathname}));const h=t=>(...e)=>{console.log(`${t} args=${JSON.stringify(e)}`),document.getElementById("root").innerHTML=`${t}`},a=t=>(...e)=>{console.log(`${t} args=${JSON.stringify(e)}`)};window.addEventListener("load",(()=>{const t=document.querySelectorAll("[data-name=terms]");t.forEach((e=>e.addEventListener("click",(()=>{(t=>{const e=document.getElementById("nav"),n=document.getElementById("root");e.style.display="flex",n.style.display="",(t=>{t.on(new RegExp("^/otus--homework--18/$"),{onEnter:h("/otus--homework--18/")});const e=t.on((t=>"/otus--homework--18/contacts"===t),{onEnter:h("/otus--homework--18/contacts"),onBeforeEnter:a("[onBeforeEnter] /otus--homework--18contacts")});t.on("/otus--homework--18/about",{onEnter:h("/otus--homework--18/about"),onLeave:(...t)=>{console.log(`[onLeave] /otus--homework--18/about args=${JSON.stringify(t)}`)}}),t.on("/otus--homework--18/about/us",{onEnter:h("/otus--homework--18/about/us")}),t.on(new RegExp("^/otus--homework--18/login$"),{onEnter:h("/otus--homework--18/login"),onBeforeEnter:a("[onBeforeEnter] /otus--homework--18login")});const n=document.getElementById("contacts"),o=t=>{t.preventDefault(),setTimeout((()=>{e(),console.log("------  Произведена отписка от выполнения хуков при последующих кликах на ссылку - '/contacts'  ------")}),0),n?.removeEventListener("click",o)};n?.addEventListener("click",o)})(new r(t))})(e.dataset.id),t.forEach((t=>{t.remove()}))}))))}))}();