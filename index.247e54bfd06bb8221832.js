!function(){"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const n=new Uint8Array(16);function s(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}const i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));const o=function(e,n,o){if(t.randomUUID&&!n&&!e)return t.randomUUID();const a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){o=o||0;for(let t=0;t<16;++t)n[o+t]=a[t];return n}return function(t,e=0){return(i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]).toLowerCase()}(a)};class a{listeners=[];constructor(t="history"){this.mode=t,this.previousPath=this.getPath(),this.currentPath=this.getPath(),this.init()}static isMatch=(t,e)=>t instanceof RegExp&&t.test(e)||"function"==typeof t&&t(e)||"string"==typeof t&&t===e;static getQueryParams=()=>{const t=/\?(.+)$/.exec(window.location.href);return t?t[1].split("&").reduce(((t,e)=>{const[n,s]=e.split("=");return t[n]=s,t}),{}):{}};init=()=>{"history"===this.mode?window.addEventListener("popstate",this.bindHandlePopState):"hash"===this.mode&&window.addEventListener("hashchange",this.bindHandleHashChange),document.body.addEventListener("click",this.bindHandleClick)};unsubscribeAll=()=>{"history"===this.mode?window.removeEventListener("popstate",this.bindHandlePopState):"hash"===this.mode&&window.removeEventListener("hashchange",this.bindHandleHashChange),document.body.removeEventListener("click",this.bindHandleClick)};getPath=()=>"hash"===this.mode?""===window.location.hash?"/":window.location.hash.slice(1):window.location.pathname+window.location.search;handleListener=async({match:t,hooks:e},n,s={})=>{const i={...s,...a.getQueryParams()},o={currentPath:n,previousPath:this.previousPath,state:i};a.isMatch(t,this.previousPath)&&e.onLeave?await e.onLeave(o):(a.isMatch(t,n)&&e.onBeforeEnter&&await e.onBeforeEnter(o),a.isMatch(t,n)&&e.onEnter&&await e.onEnter(o))};handleAllListeners=(t,e,n={})=>{const s=this.listeners.find((e=>a.isMatch(e.match,t)));s&&this.handleListener(s,e,n);const i=this.listeners.find((t=>a.isMatch(t.match,e)));i&&this.handleListener(i,e,n)};on=(t,e={})=>{const n=o(),s={id:n,match:t,hooks:e};return this.listeners.push(s),this.handleListener(s,this.currentPath),()=>{this.listeners=this.listeners.filter((t=>t.id!==n))}};go=(t,e={})=>{this.previousPath=this.currentPath,"hash"===this.mode?window.location.hash=t:"history"===this.mode&&window.history.pushState(e,"",t),this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,e)};handleClick=t=>{if(!t.target.matches("a"))return;t.preventDefault();const e=t.target.getAttribute("href")??"";this.go(e)};bindHandleClick=this.handleClick.bind(this);handlePopState=()=>{this.previousPath=this.currentPath,this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,{})};bindHandlePopState=this.handlePopState.bind(this);handleHashChange=()=>{this.currentPath!==this.getPath()&&(this.previousPath=this.currentPath,this.currentPath=this.getPath(),this.handleAllListeners(this.previousPath,this.currentPath,{}))};bindHandleHashChange=this.handleHashChange.bind(this)}const r=t=>(...e)=>{console.log(`${t} args=${JSON.stringify(e)}`),document.getElementById("root").innerHTML=`${t}`},h=t=>(...e)=>{console.log(`${t} args=${JSON.stringify(e)}`)};window.addEventListener("load",(()=>{const t=document.querySelectorAll("[data-name=terms]");t.forEach((e=>e.addEventListener("click",(()=>{(t=>{const e=document.getElementById("nav"),n=document.getElementById("root");e.style.display="flex",n.style.display="",(t=>{t.on(/^\/$/,{onEnter:r("/")});const e=t.on((t=>"/contacts"===t),{onEnter:r("/contacts"),onBeforeEnter:h("[onBeforeEnter] contacts")});t.on("/about",{onEnter:r("/about"),onLeave:(...t)=>{console.log(`[onLeave] /about args=${JSON.stringify(t)}`)}}),t.on("/about/us",{onEnter:r("/about/us")}),t.on(/^\/login$/,{onEnter:r("/login"),onBeforeEnter:h("[onBeforeEnter] login")});const n=document.getElementById("contacts"),s=t=>{t.preventDefault(),setTimeout((()=>{e(),console.log("Произведена отписка от выполнения хуков при последующих кликах на ссылку - '/contacts'")}),0),n?.removeEventListener("click",s)};n?.addEventListener("click",s)})(new a(t))})(e.dataset.id),t.forEach((t=>{t.remove()}))}))))}))}();